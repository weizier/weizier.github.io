---
layout: post
title: Heap
---

需要注意的是，这里所说的heap不是动态分配内存里的存储结构heap，而是指数据结构里的heap。

在计算机科学中，堆是一个基于树的抽象数据结构。如果A是B的父节点，那么A和B就按照整个堆的排序规则进行排序，也就是说整个堆中的父节点要么不大于其所有子节点（最小堆min heap）要么不小于其所有子节点(max heap)。最常见的堆是二叉堆，并且堆中的树是完全二叉树。

堆并不是一个存储结构，它可以认为是部分排序了的，即只要求父节点和子节点之间的关系，但是并没有要求子节点与子节点之间的关系，所以父节点和子节点是排序的，但是子节点和子节点并不一定是排序的。通常所说的优先队列一般就是指heap。

下面主要说二叉堆。

实际上，一个二叉堆可以看做特殊的二叉树，当然有两点限制：
> 二叉堆是完全二叉树，也就是说树的所有层都是满的，除了最下面的叶子层。并且如果叶子层不满的话，那么一定要从左至右放置节点。
> 所有父节点都比其子节点要么大于等于（max heap）要么小于等于其所有子节点（min heap）.

一定要记得，二叉堆只是一个普通的堆，更广泛意义上的堆不一定是二叉树。

####插入(up-heap)
> 插入新元素到堆的最底层，也就是添加到最底层的最右边
> 将新元素和其父节点进行比较，如果不满足min heap或者max heap的堆规则，则将其和父节点进行交换
> 重复第二步直至满足堆规则
实际上可以形象地理解为不断上浮的过程，由于是完全二叉树，所以时间复杂度为O(logN)

####删除(down-heap)
> 删除堆顶元素时，也就是说最顶端的元素被删除，同时将最底层最右边的元素放置在最顶端
> 比较新的root节点和其子节点是否满足heap规则，如果满足则停止
> 和其子节点中的一个进行交换（min heap中与最小的子节点交换，max heap中与最大子节点交换）





